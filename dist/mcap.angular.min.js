!function(a,b,c){"use strict";b.module("mCAP",[]).run(function(a,d,e,f){if(!window.mCAP)throw new Error("Please include mCAP libary");var g=c.sync,h=c.Model.prototype.set;c.ajax=function(c){c.method=c.type;var e=d.defer();return a.apply(b,[c]).then(function(a){c.success(a),e.resolve(a)},function(a){e.reject(a),c.error(a)}),e.promise},c.sync=function(a,b,e){var f=d.defer();return g.apply(c,[a,b,e]).then(function(){f.resolve(b)},function(a){f.reject(a)}),f.promise},c.Model.prototype.set=function(){return f(function(){h.apply(this,arguments)}),h.apply(this,arguments)}}).provider("mCAPApplication",function(){var a=window.mCAP;return{setBaseUrl:function(b){a.application.set("baseUrl",b)},$get:function(){return window.mCAP.application}}}).service("MCAPUsers",function(){return window.mCAP.Users}).service("MCAPUser",function(){return window.mCAP.User}).service("MCAPRoles",function(){return window.mCAP.Roles}).service("MCAPRole",function(){return window.mCAP.Role}).service("MCAPGroups",function(){return window.mCAP.Groups}).service("MCAPGroup",function(){return window.mCAP.Group}).service("MCAP",function(){return window.mCAP}).service("MCAPCollection",function(a){return a.Collection}).service("MCAPModel",function(a){return a.Model})}(window,angular,Backbone);